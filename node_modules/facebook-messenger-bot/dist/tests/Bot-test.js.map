{"version":3,"sources":["../../src/tests/Bot-test.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;;;AAEA,IAAM,QAAQ,QAAQ,GAAR,CAAY,iBAA1B;;AAEA,SAAS,KAAT,EAAgB,YAAM;AACpB,MAAM,MAAM,UAAQ,KAAR,CAAZ;;AAEA,MAAI,KAAJ,EAAW;AACT,OAAG,2BAAH,EAAgC,gBAAQ;AACtC,UAAI,IAAJ,CAAS,SAAT;AAAA,uEAAoB,iBAAM,OAAN;AAAA,cACX,MADW;AAAA;AAAA;AAAA;AAAA;AACX,wBADW,GACD,OADC,CACX,MADW;AAAA;AAAA,yBAEZ,OAAO,KAAP,CAAa,sBAAb,EAAqC,IAArC,CAFY;;AAAA;;AAIlB,mCAAO,KAAP,CAAa,OAAO,UAApB,EAAgC,QAAhC;AACA,mCAAO,KAAP,CAAa,OAAO,SAApB,EAA+B,QAA/B;AACA,mCAAO,KAAP,CAAa,OAAO,SAApB,EAA+B,KAA/B;;AANkB;AAAA,yBAQZ,OAAO,KAAP,CAAa,sBAAb,EAAqC,IAArC,CARY;;AAAA;AASlB,mCAAO,KAAP,CAAa,OAAO,SAApB,EAA+B,IAA/B;AACA;;AAVkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAApB;;AAAA;AAAA;AAAA;AAAA;;AAaA,UAAI,aAAJ;AACD,KAfD;AAgBD;;AAGD,KAAG,qBAAH,EAA0B,gBAAQ;AAChC,QAAI,IAAJ,CAAS,SAAT;AAAA,sEAAoB,kBAAM,OAAN;AAAA;AAAA;AAAA;AAAA;AAClB,iCAAO,KAAP,CAAa,QAAQ,IAArB,EAA2B,eAAK,KAAL,CAAW,CAAX,EAAc,SAAd,CAAwB,CAAxB,EAA2B,OAA3B,CAAmC,IAA9D;AACA;;AAFkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAApB;;AAAA;AAAA;AAAA;AAAA;;AAKA,QAAI,aAAJ;AACD,GAPD;;AAUA,KAAG,uBAAH,EAA4B,gBAAQ;AAClC,QAAI,IAAJ,CAAS,SAAT;AAAA,sEAAoB,kBAAM,OAAN;AAAA;AAAA;AAAA;AAAA;AAClB,iCAAO,KAAP,CAAa,QAAQ,MAAR,CAAe,CAAf,CAAb,EAAgC,gBAAM,KAAN,CAAY,CAAZ,EAAe,SAAf,CAAyB,CAAzB,EAA4B,OAA5B,CAAoC,WAApC,CAAgD,CAAhD,EAAmD,OAAnD,CAA2D,GAA3F;AACA;;AAFkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAApB;;AAAA;AAAA;AAAA;AAAA;;AAKA,QAAI,aAAJ;AACD,GAPD;AAQD,CAzCD","file":"Bot-test.js","sourcesContent":["import assert from 'assert';\nimport {Bot} from '../..';\nimport text from '../../fixtures/text.json';\nimport image from '../../fixtures/image.json';\n\nconst token = process.env.PAGE_ACCESS_TOKEN;\n\ndescribe('Bot', () => {\n  const bot = new Bot(token);\n\n  if (token) {\n    it('should fetch user profile', done => {\n      bot.once('message', async message => {\n        const {sender} = message;\n        await sender.fetch('first_name,last_name', true);\n\n        assert.equal(sender.first_name, 'Mathew');\n        assert.equal(sender.last_name, 'Kurian');\n        assert.equal(sender.fromCache, false);\n\n        await sender.fetch('first_name,last_name', true);\n        assert.equal(sender.fromCache, true);\n        done();\n      });\n\n      bot.handleMessage(text);\n    });\n  }\n\n\n  it('should extract text', done => {\n    bot.once('message', async message => {\n      assert.equal(message.text, text.entry[0].messaging[0].message.text);\n      done();\n    });\n\n    bot.handleMessage(text);\n  });\n\n\n  it('should extract images', done => {\n    bot.once('message', async message => {\n      assert.equal(message.images[0], image.entry[0].messaging[0].message.attachments[0].payload.url);\n      done();\n    });\n\n    bot.handleMessage(image);\n  });\n});\n"]}